<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:buildServer="clr-namespace:Soloplan.WhatsON.GUI.Common.BuildServer"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:connectorTreeView="clr-namespace:Soloplan.WhatsON.GUI.Common.ConnectorTreeView">

  <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
  <connectorTreeView:StatusToColorConverter x:Key="StatusToColorConverter" />
  <connectorTreeView:TimeToAproximateTimeConverter x:Key="TimeToAproximateTimeConverter" />
  <!--  ToDo DGO: this should be separate control for displaying status. This way it will be easier to reuse.  -->

  <ContextMenu x:Key="BuildServerProjectContextMenu">
    <!--  CommandParameter must be declared before Command or else value from previous opening of context menu will be passed. WTF?!  -->
    <MenuItem Header="Open project web page"
              CommandParameter="{Binding OpenWebPageParam}"
              Command="{Binding OpenWebPage}" />
    <MenuItem Header="Open current build page"
              Visibility="{Binding CurrentStatus.Building, Converter={StaticResource BoolToVisibility}}"
              CommandParameter="{Binding CurrentStatus.OpenBuildPageCommandData}"
              Command="{Binding CurrentStatus.OpenBuildPage}" />

  </ContextMenu>
  <DataTemplate DataType="{x:Type buildServer:BuildStatusViewModel}">
    <buildServer:HistoryBuildControl DataContext="{Binding}">
      <buildServer:HistoryBuildControl.ToolTip>
        <StackPanel>
          <buildServer:HistoryBuildTooltipControl DataContext="{Binding}" />
          <buildServer:CulpritsControl Caption="Changes by:" CulpritsProp="{Binding DataContext.Culprits, RelativeSource={RelativeSource AncestorType=StackPanel}}" />
        </StackPanel>
      </buildServer:HistoryBuildControl.ToolTip>
    </buildServer:HistoryBuildControl>
  </DataTemplate>

  <DataTemplate DataType="{x:Type buildServer:BuildServerProjectStatusViewModel}">
    <StackPanel ContextMenu="{StaticResource BuildServerProjectContextMenu}" Orientation="Horizontal">
      <buildServer:BuildInformationIconControl DataContext="{Binding CurrentStatus}">
        <buildServer:BuildInformationIconControl.ToolTip>
          <StackPanel>
            <buildServer:ProgressBarTooltipControl DataContext="{Binding}" />
            <buildServer:CulpritsControl Caption="Changes by:" CulpritsProp="{Binding DataContext.Culprits, RelativeSource={RelativeSource AncestorType=StackPanel}}" />
          </StackPanel>
        </buildServer:BuildInformationIconControl.ToolTip>
      </buildServer:BuildInformationIconControl>
      <TextBlock Text=" " />
      <TextBlock Text="{Binding Name}" />
      <TextBlock Text=" #" />
      <TextBlock Text="{Binding CurrentStatus.BuildNumber}" />
      <TextBlock Text=" " />
      <buildServer:HistoryBuildList DataContext="{Binding ConnectorSnapshots, Mode=OneWay}" />
    </StackPanel>
  </DataTemplate>
</ResourceDictionary>